var MICROSTOCKS=function(){for(var e=function(e,t){return(void 0===e||isNaN(e)||null===e||"number"!=typeof e)&&(e=1,t=100),(void 0===t||isNaN(t)||null===t||"number"!=typeof t)&&(t=e,e=1),Math.floor(Math.random()*(t-e)+e)},t=function(t){var o,a,n,s;return o=["qhi","mo","bli","bla","blu","amm","an","ra","ran","ram","rom","ro","qo","phi","pha","phe","pe","pfa","pfe","pa","neh","le","li","mu","min","nuv","go","gro","gran","gra","ip","iq","ik","sa","tik","theo","thra","yi","ya","yo","yon","yan","yom","clo","clat","nar","lay","lin","ler","la","mab","mob","my","myk","mey","t'ka","s'sa","s'se"],a=["lem","laam","lam","and","ni","pin","ii","nis","dar","jar","mar","ler","lar","lar","end","in","oui","wi","when","je","ut","jaa","gis","ggin","ggar","ghen","lip","fraw","frae","rae","rin","rra","to","tin","tar","in","il","ot","cite","bin","k","aj","ej","oj","it","sei","icron","ycite","cite","ust","oz","aez","aer"],n=o.concat(a),s=e(1,100)<20?o[e(0,o.length)]+a[e(0,a.length)]+n[e(0,n.length)]:e(1,100)<90?o[e(0,o.length)]+a[e(0,a.length)]:o[e(0,o.length)],s=s.charAt(0).toUpperCase()+s.substr(1)},o=function(a){var n=a||t();n.split(" ").length<e(3)&&(n+=" "+t(),o(n));var s=["II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","Prime","Beta","Alpha","Omega"];return e(100)<30&&(n+=" "+s[e(0,s.length-1)]),n},a=function(){return{x:e(-1e4,1e4),y:e(-1e4,1e4)}},n=function(e,t){return Math.sqrt(Math.abs(Math.pow(e.location.x-t.location.x,2)+Math.pow(e.location.y-t.location.y,2)))},s=function(){var t=e(-120,200),o=t>0?e(t,t*(.1*e(150,235))):e(t,t+e(50,300));return{min:t,max:o}},r=function(t){var o=["volcanic","lava","gas giant","desert","sand"],a=["ocean","swamp","temperate","cave","archipelago","forest","stone","rock"],n=["ice","tiaga","blizzard","snow","stone"],s=["silica-based","carbon-based","hydrogen-based","terraformed","uninhabited","gusty","quiet","tempestous","perpetually dark","helium-based","magnesium-based","aluminum-based"];return{base:function(){return t.max>100?o[e(0,o.length-1)]:t.min>0?a[e(0,a.length-1)]:n[e(0,n.length-1)]}(),adjective:function(){var t=[];if(e(100)<45){var o=s[e(0,s.length-1)];t.push(o);for(var a=e(0,s.length-1);o===s[a];)a=e(0,s.length-1);if(t.push(s[a]),e(100)<30){for(o=t,a=e(0,s.length-1);o[0]===s[a]||o[1]===s[a];)a=e(0,s.length-1);t.push(s[a])}}else t.push(s[e(0,s.length-1)]);return t}()}},l=function(){for(var t="",o=0;3>o;o++)t+=String.fromCharCode(65+e(26));return t},u=function(){var t=[{name:"Health",icon:"fa-heartbeat"},{name:"Natural",icon:"fa-paw"},{name:"Tech",icon:"fa-qrcode"},{name:"Rare",icon:"fa-diamond"},{name:"Mineral",icon:"fa-gg-circle"}];return t[e(0,t.length)]},i=function(t){var o="",a=[{name:"stable-up",maxFlux:e(0,3)},{name:"stable",maxFlux:e(-1,2)},{name:"stable-down",maxFlux:e(-2,0)}],n=[{name:"volatile-up",maxFlux:e(0,6)},{name:"volatile",maxFlux:e(-3,4)},{name:"volatile-down",maxFlux:e(-5,-1)}];return o="Health"==t.name||"Natural"==t.name?a[0]:"Mineral"==t.name?a[e(0,a.length)]:n[e(0,n.length)]},c=function(t){for(var o=[],a="",n=0;t>n;n++)o[n]={},a=u(),o[n].cost=e(e(2,5),e(20,e(20,110))),o[n].name=l(),o[n].type=a,o[n].trend=i(a);return o},m=function(t,o){for(var a=!1,n=0;o>n;n++)e(100)>70?(t[n].amount=e(e(1,4),e(5,20)),a=!0):t[n].amount=0;a===!1&&(t[e(0,t.length)].amount=e(e(1,4),e(5,20)))},f=function(){var e=document.createElement("script");e.src="https://www.gstatic.com/charts/loader.js",e.onload=e.onreadystatechange=function(){var e=w.stats.resources;google.charts.load("current",{packages:["corechart"]}),B={netWorth:[],resourceAmounts:[],totalMoney:[],resourceList:[]},B.netWorth.push(["Date","Net Worth"]),B.netWorth.push([E+"-"+L,x+w.stats.money]),B.totalMoney.push(["Date","Cash","Portfolio","Net Worth"]),B.totalMoney.push([E+"-"+L,w.stats.money,x,x+w.stats.money]);for(var t=0;t<e.length;t++)B.resourceList[e[t].name]=[["Date","Cost"],[E+"-"+L,e[t].cost]]},document.body.appendChild(e)},d={},p="1.0.7",h=document.getElementsByClassName("log-list")[0],g=10,y=[],v=0,b=0;b<e(30,40);b++)v=s(),y.push({name:o(),location:a(),temp:v,type:r(v)});for(var w={stats:{money:e(350,500),location:e(0,y.length-1),resources:function(){var t=e(20,30),o=c(t);return m(o,t),o.sort(function(e,t){return t.amount-e.amount})}()}},x=0,I=0;I<w.stats.resources.length;I++)x+=w.stats.resources[I].amount*w.stats.resources[I].cost;var C=new Date,M=C.getMonth()+1,E=C.getFullYear(),L=M>9?""+M:"0"+M,B=[],T=function(e,t,o){var a="";if(void 0!==t&&null!==t){var n="";n=t,a=document.createElement("LI"),a.innerHTML=n,void 0!==e||null!==e?(e.appendChild(a),e.scrollTop=e.scrollHeight):console.error("addListElement exception: obj was null. Please call addListELement with a non-null, defined object as the first argument. See syntax: addListElement(obj, text, cssClass), with cssClass being optional.")}if(void 0!==o&&null!==o)if(o.split(" ").length>1){var s=o.split(" ");for(var r in s)s.hasOwnProperty(r)&&a.classList.add(s[r])}else a.classList.add(o)},j=function(e,t){var o=document.getElementsByClassName(e)[0];void 0!==o?o.innerHTML=t:console.error("changeListElement needs to be called with a valid cssClass and incoming text. Check your syntax: changeListElement(cssClass, text);")},N=function(t){var o=w.stats.resources[t],a=Math.floor(.2*Math.abs(o.variant)),n=a>1?a:e(5,15),s=u();w.stats.resources[t]={cost:e(e(2,5),e(20,e(20,110))),name:l(),type:s,trend:i(s),amount:0},w.stats.money+=n,T(h,"Player paid out $"+n+" during the liquidation!"),B.resourceList[w.stats.resources[t].name]=[["Date","Cost"],[E+"-"+L,w.stats.resources[t].cost]]},k=function(t,o,a,n,s,r){e(100)<=r&&(t[s].cost<o&&t[s].cost>Math.abs(a)&&(w.stats.resources[s].cost+=a,a>0?T(h,n+" has risen $"+a+" dollars.","resource-increase"):0>a&&T(h,n+" has fallen $"+Math.abs(a)+" dollars.","resource-decrease")),t[s].cost<=1&&(T(h,n+" is bankrupt! Resource pulled from market."),N(s),T(h,"New resource ("+t[s].name+", worth $"+t[s].cost+") created!")))},S=function(){for(var t=w.stats.resources,o="",a="",n=0,s=250,r=0;r<t.length;r++)n=e(0,t[r].trend.maxFlux),o=t[r].name,a=t[r].trend.name,"stable-up"===a||"stable"===a||"stable-down"===a?k(t,s,n,o,r,10):k(t,s,n,o,r,30)},O=function(){var e=w.stats;e.resources.sort(function(e,t){return t.amount-e.amount});for(var t="",o="",a=0;a<e.resources.length;a++)t=document.getElementsByClassName("resource-"+a)[0],o='<p><span class="fa '+e.resources[a].type.icon+' fa-fw"></span>'+e.resources[a].name+'</p><p><span class="fa fa-dollar fa-fw"></span>'+e.resources[a].cost+"</p>",e.resources[a].amount>0&&(o+='<p><span class="fa fa-briefcase fa-fw"></span>'+e.resources[a].amount+"</p>"),t.innerHTML=o,e.resources[a].amount>0&&!t.classList.contains("owned")?t.classList.add("owned"):0===e.resources[a].amount&&t.classList.contains("owned")&&t.classList.remove("owned")},Y=function(){var e=w.stats,t=w.stats.resources;B.netWorth.push([E+"-"+L,x+e.money]),B.totalMoney.push([E+"-"+L,e.money,x,x+e.money]);for(var o in t)t.hasOwnProperty(o)&&B.resourceList[t[o].name].push([E+"-"+L,t[o].cost])},q=function(){M>=12?(M=1,E+=1):M+=1,L=M>9?""+M:"0"+M,Y()},A=function(){var e=w.stats;S(),x=0;for(var t=0;t<e.resources.length;t++)x+=e.resources[t].amount*e.resources[t].cost;var o=document.getElementsByClassName("net-worth-button")[0],a=o.textContent;a=a.split("$"),a[2]=a[2].split(" ")[0],parseInt(a[2])<x+parseInt(e.money)?j("net-worth-button",'<span class="fa fa-money fa-fw"></span>$'+e.money+' <span class="fa fa-bank fa-fw"></span>$'+(x+parseInt(e.money))+" - Up!"):parseInt(a[2])===x+parseInt(e.money)?j("net-worth-button",'<span class="fa fa-money fa-fw"></span>$'+e.money+' <span class="fa fa-bank fa-fw"></span>$'+(x+parseInt(e.money))):j("net-worth-button",'<span class="fa fa-money fa-fw"></span>$'+e.money+' <span class="fa fa-bank fa-fw"></span>$'+(x+parseInt(e.money))+" - Down!"),q(),j("planet-info-button",'<span class="fa fa-home fa-fw"></span>'+y[parseInt(e.location)].name+' <span class="fa fa-calendar fa-fw"></span>'+L+"/"+E),O()},D=function(){for(var e=[],t=0;t<w.stats.resources.length;t++)w.stats.resources[t].amount>0&&e.push(t);return 0!==e.length?!0:!1},H=function(){var t=[];if(w.stats.resources.length>1)for(var o=0;o<w.stats.resources.length;o++)w.stats.resources[o].amount>0&&t.push(o);w.stats.resourceIndex=0===t.length?0:t[e(0,t.length)]},F=function(t){var o=w.stats;"undefined"!=typeof t&&"object"!=typeof t?t<o.resources.length?w.stats.resourceIndex=t:console.error("updateResourceIndex exception: Incoming resourceIndex outside of bounds of resources array."):w.stats.resourceIndex=e(0,o.resources.length)},P=function(e){w.stats.location=e},W=function(e,t,o){var a="";void 0!==e&&null!==e?e.addEventListener("click",function(){"object"==typeof t&&void 0!==t&&null!==t?t.length>1?2===t.length?a=t[0](t[1]):3===t.length&&(a=t[0](t[1],t[2])):a=t():"function"==typeof t?a=t():(console.error("addButtonEvent called with undefined logMessage function. logMessage function should return a string. See syntax: addButtonEvent(button, logFunction, moreBehavior), with moreBehavior being an optional function."),console.error("typeof logMessage = "+typeof t)),void 0!==a&&T(h,a),void 0!==o&&null!==o&&("function"==typeof o?o():"object"==typeof o&&o[0](o[1]))}):console.error("addButtonEvent needs a defined, non-null button as it's first argument. See syntax: addButtonEvent(button, logFunction, moreBehavior), with moreBehavior being an optional function.")},z=function(e,t){"undefined"==typeof e||null===e?(F(),e=w.stats.resourceIndex):F(e);var o=void 0===t?1:t;w.stats.money<w.stats.resources[e].cost*o?(T(h,"Can't afford unit(s) of "+w.stats.resources[e].name+"."),T(h,"(Attempted to purchase "+o+".)")):T(h,"You bought "+o+" unit(s) of "+w.stats.resources[e].name+".")},R=function(e){var t=w.stats,o=void 0===e?1:e,a=t.resourceIndex;t.money>=t.resources[a].cost*o?(w.stats.money=t.money-t.resources[a].cost*o,w.stats.resources[a].amount+=parseInt(o)):console.error("buyAction exception: Not enough money to make purchase."),A()},V=function(e,t){if("undefined"==typeof e||null===e){if(!D())return T("You don't have any resource to sell! Try buying some."),null;H(),e=w.stats.resourceIndex}else F(e);var o=void 0===t?1:t;w.stats.resources[e].amount>=o?T(h,"You sold "+o+" unit(s) of "+w.stats.resources[e].name+"."):T(h,"You don't have "+o+" unit(s) of "+w.stats.resources[e].name+".")},X=function(e){if(D()){var t=w.stats,o=void 0===e?1:e,a=t.resourceIndex;t.resources[a].amount>=o&&(w.stats.resources[a].amount-=parseInt(o),w.stats.money=t.money+t.resources[a].cost*o,A())}},G=function(t){for(var o=w.stats,a=e(0,y.length-1);a===parseInt(o.location);)a=e(0,y.length-1);var s=t||a,r=Math.ceil(n(y[s],y[o.location]));return g=Math.floor(r*(.001*e(1,3))),o.money<g?(T(h,"Can't afford the "+r+" light-year move from "+y[o.location].name+" to "+y[s].name+"."),T(h,"Why don't you sell some resources?"),null):(F(),T(h,"Player moved from "+y[parseInt(o.location)].name+" to "+y[s].name),P(s),void T(h,"You were charged  $"+g+" to go "+r+" light-years."))},K=function(){var e=w.stats;e.money>=g&&(w.stats.money=parseInt(e.money)-g,A())},U=function(){$(".travel-text").html("<p>Where would you like to go? Currently on <b>"+y[parseInt(w.stats.location)].name+"</b>.</p>");for(var e=$(".travel-select")[0],t=e.options.length-1;t>=0;t--)e.remove(t);for(var o=0;o<y.length;o++)if(parseInt(w.stats.location)!==o){var a=document.createElement("option");a.value=a.innerHTML=y[o].name+", "+Math.ceil(n(y[o],y[w.stats.location]))+" LY",e.appendChild(a)}$(".travel").dialog({modal:!0,buttons:{Go:function(){var e=0;for(var t in y)y.hasOwnProperty(t)&&$(".travel-select")[0].value.indexOf(y[t].name)>-1&&(e=t);G(e),K(),$(this).dialog("close")},"Random Planet":function(){G(),K(),$(this).dialog("close")},Close:function(){$(this).dialog("close")}}})},J=function(){$(".options-text").text("Microstocks"),$(".options-subtext").text(p),$(".options-author").html('Author: <a href="https://github.com/evangipson">Evan Gipson</a>'),$(".options").dialog({modal:!0,buttons:{Close:function(){$(this).dialog("close")}}})},Q=function(){var e=w.stats.location,t=y[e].name,o=y[e].type.base,a=y[e].temp,n=function(){var t="",o=y[e].type.adjective;if(o.length>1)for(var a=0;a<o.length;a++)t+=a===o.length?" "+o[a]:" "+o[a]+", ";else 1===o.length&&(t=" "+o[0]);return t}(),s="<p>You are on <b>"+t+"</b>.</p><p><b>"+t+"</b> is a"+n+" "+o+" type planet.</p><p>The temperature ranges from "+a.min+"C to "+a.max+"C.</p>";$(".planet-info-message").html(s),$(".planet-info-dialog").dialog({modal:!0,buttons:{Close:function(){$(this).dialog("close")}}})},Z=function(e,t){var o="";"resourceList"===e&&(o=t+"'s value."),"totalMoney"===e&&(o="your cash on hand, portfolio, and total net worth."),$(".graph-type").text("Here's the historical data of "+o);var a={title:"resourceList"===e?t:e,hAxis:{title:"Date",titleTextStyle:{color:"#333"},slantedText:!0,slantedTextAngle:50},vAxis:{minValue:0},width:$("#graph-wrapper").outerWidth(),height:$("#graph-wrapper").outerHeight(),pointSize:3,isStacked:!1},n=new google.visualization.AreaChart(document.getElementById("graph-wrapper"));"resourceList"===e?n.draw(google.visualization.arrayToDataTable(B[e][t]),a):n.draw(google.visualization.arrayToDataTable(B[e]),a),$(".graph-dialog").dialog({modal:!0,buttons:{Close:function(){$(this).dialog("close")}}})},_=function(e,t){var o=w.stats,a=e,n=o.resources[a].name,s=o.resources[a].cost,r=o.resources[a].type.name,l=o.resources[a].type.icon,u=o.resources[a].amount,i=u>0?"<li>You own "+u+" unit(s) of "+n+"</li>":"<li>You don't own any units of "+n+"</li>";return'<h3><span class="fa '+l+' fa-fw"></span>'+n+'</h3><hr /><ul><li class="buysell-resource-value">Current cost: $'+s+"</li><li>Type: "+r+"</li>"+i+"</ul><hr />"+t},ee=function(e){var t=w.stats,o=0,a=0,n=0,s=1,r=t.resources[e].name;$(".buy-sell-dialogue").html(_(e,"Would you like to buy or sell "+r+" today?")),$(".buy-sell").dialog({modal:!0,buttons:{Buy:function(){o=parseInt(t.money)/parseInt(t.resources[e].cost),1>o?$(".buy-sell-dialogue").html(_(e,"Can't afford any "+r+"! Try selling other resources!")):(a=o>=50?5:1,$(".buy-resource-slider").slider({value:1,min:1,max:o,step:a,slide:function(e,t){$(".buy-resource-amount").text("Buying "+t.value+" "+r+"!"),s=t.value}}),n=$(".resource-slider").slider("value"),$(".buy-resource-amount").text("Buying 1 "+r+"!"),$(".buy-dialog").dialog("open"))},Sell:function(){t.resources[e].amount>0?(a=t.resources[e].amount>=50?5:1,$(".sell-resource-slider").slider({value:1,min:1,max:t.resources[e].amount,step:a,slide:function(e,t){$(".sell-resource-amount").text("Selling "+t.value+" "+r+"."),s=t.value}}),n=$(".resource-slider").slider("value"),$(".sell-resource-amount").text("Selling 1 "+r+"."),$(".sell-dialog").dialog("open")):$(".buy-sell-dialogue").html(_(e,"You don't have any "+r+" to sell!"))},History:function(){Z("resourceList",r)},Close:function(){$(this).dialog("close")}}}),$(".buy-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Buy:function(){if(null!==s&&void 0!==s){var t=z(e,s);T(h,t),R(s)}else console.error("buySellDialogue exception: Resource purchase amount undefined or null, please try again!");$(".buy-sell").dialog("close"),$(this).dialog("close")},"Buy Max":function(){var o=Math.floor(t.money/t.resources[e].cost),a=z(e,o);T(h,a),R(o),$(".buy-sell").dialog("close"),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}),$(".sell-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Sell:function(){if(null!==s&&void 0!==s){var t=V(e,s);T(h,t),X(s)}else console.error("buySellDialogue exception: Resource sell amount undefined or null, please try again!");$(".buy-sell").dialog("close"),$(this).dialog("close")},"Sell All":function(){var o=t.resources[e].amount,a=V(e,o);T(h,a),X(o),$(".buy-sell").dialog("close"),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})},te=function(){for(var e=document.getElementsByClassName("resource"),t=0;t<e.length;t++)W(e[t],[ee,t])},oe=function(){for(var e=w.stats,t="",o="",a=[],n=document.getElementsByClassName("resource-list")[0],s="",r=0;r<e.resources.length;r++){s=document.createElement("LI"),o='<p><span class="fa '+e.resources[r].type.icon+' fa-fw"></span>'+e.resources[r].name+'</p><p><span class="fa fa-dollar fa-fw"></span>'+e.resources[r].cost+"</p>",e.resources[r].amount>0&&(o+='<p><span class="fa fa-briefcase fa-fw"></span>'+e.resources[r].amount+"</p>"),s.innerHTML=o,t="resource resource-"+r+" under-hover",e.resources[r].amount>0&&(t+=" owned"),a=t.split(" ");for(var l in a)a.hasOwnProperty(l)&&s.classList.add(a[l]);n.appendChild(s)}te()},ae=function(){for(var e=w.stats,t=w.stats.resources,o=document.getElementsByClassName("inventory-list")[0],a=0,n=0;n<t.length;n++)a+=e.resources[n].amount*e.resources[n].cost;T(o,'<span class="fa fa-money fa-fw"></span>$'+e.money+' <span class="fa fa-bank fa-fw"></span>$'+(a+parseInt(e.money)),"money net-worth-button under-hover"),T(o,'<span class="fa fa-home fa-fw"></span>'+y[parseInt(e.location)].name+' <span class="fa fa-calendar fa-fw"></span>'+L+"/"+E,"planet-info-button under-hover"),oe()};return d.init=function(){$.getScript("https://code.jquery.com/ui/1.11.4/jquery-ui.min.js",function(){var e=document.getElementsByClassName("buy-button")[0],t=document.getElementsByClassName("sell-button")[0],o=document.getElementsByClassName("travel-button")[0],a=document.getElementsByClassName("options-button")[0];W(e,z,R),W(t,V,X),W(o,U),W(a,J),ae(),T(h,"You arrive on "+y[parseInt(w.stats.location)].name+" with a few resources and $"+w.stats.money+" to your name."),f();var n=document.getElementsByClassName("net-worth-button")[0];W(n,[Z,"totalMoney"]);var s=document.getElementsByClassName("planet-info-button")[0];W(s,Q)})},d}(),scriptTag=document.createElement("script");scriptTag.src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js",scriptTag.onload=scriptTag.onreadystatechange=MICROSTOCKS.init,document.body.appendChild(scriptTag);