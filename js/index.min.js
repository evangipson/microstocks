var MICROSTOCKS=function(){for(var e=function(e,t){return(void 0===e||isNaN(e)||null===e||"number"!=typeof e)&&(e=1,t=100),(void 0===t||isNaN(t)||null===t||"number"!=typeof t)&&(t=e,e=1),Math.floor(Math.random()*(t-e)+e)},t=function(t){var o,n,s,a;return o=["qhi","mo","bli","bla","blu","amm","an","ra","ran","ram","rom","ro","qo","phi","pha","phe","neh","ni","mu","min","nuv","go","gro","gran","gra","ip","iq","ikk","s'sa","tik","theo","thra","yi","ya","yo","yon","yan","yom","clo","clat","nar"],n=["lem","laam","lam","and","ni","pin","ii","nis","dar","jar","mar","ler","lar","llar","end","in","inn","oui","wi","when","je","jee","jaa","gis","ggin","ggar","ghen","lip","fraw","frae","rae","rin","rra","to","tin","tar"],s=o,a=e(1,100)<33?o[e(0,o.length)]+n[e(0,n.length)]+s[e(0,s.length)]:e(1,100)<90?o[e(0,o.length)]+n[e(0,n.length)]:o[e(0,o.length)],a=a.charAt(0).toUpperCase()+a.substr(1)},o=function(n){var s=n||t();return s.split(" ").length<e(3)&&(s+=" "+t(),o(s)),s},n=function(){return{x:e(-1e4,1e4),y:e(-1e4,1e4)}},s=function(e,t){return Math.sqrt(Math.abs(Math.pow(e.location.x-t.location.x,2)+Math.pow(e.location.y-t.location.y,2)))},a=function(){var t=e(-120,1200),o=t>0?e(t,t+t*(.1*e(15,25))):e(t,t+e(50,300));return{min:t,max:o}},r=function(){for(var t="",o=0;3>o;o++)t+=String.fromCharCode(65+e(26));return t},l=function(){var t=[{name:"Health",icon:"fa-heartbeat"},{name:"Natural",icon:"fa-paw"},{name:"Tech",icon:"fa-qrcode"},{name:"Rare",icon:"fa-diamond"},{name:"Mineral",icon:"fa-gg-circle"}];return t[e(0,t.length)]},u=function(t){var o="",n=[{name:"stable-up",maxFlux:e(0,3)},{name:"stable",maxFlux:e(-1,2)},{name:"stable-down",maxFlux:e(-2,0)}],s=[{name:"volatile-up",maxFlux:e(0,6)},{name:"volatile",maxFlux:e(-3,4)},{name:"volatile-down",maxFlux:e(-5,-1)}];return o="Health"==t.name||"Natural"==t.name?n[0]:"Mineral"==t.name?n[e(0,n.length)]:s[e(0,s.length)]},i=function(t){for(var o=[],n="",s=0;t>s;s++)o[s]={},n=l(),o[s].cost=e(e(2,5),e(20,e(20,110))),o[s].name=r(),o[s].type=n,o[s].trend=u(n);return o},c=function(t,o){for(var n=!1,s=0;o>s;s++)e(100)>70?(t[s].amount=e(e(1,4),e(5,20)),n=!0):t[s].amount=0;n===!1&&(t[e(0,t.length)].amount=e(e(1,4),e(5,20)))},m=function(){var e=document.createElement("script");e.src="https://www.gstatic.com/charts/loader.js",e.onload=e.onreadystatechange=function(){var e=C>9?""+C:"0"+C,t=v.stats.resources;google.charts.load("current",{packages:["corechart"]}),M={netWorth:[],resourceAmounts:[],totalMoney:[],resourceList:[]},M.netWorth.push(["Date","Net Worth"]),M.netWorth.push([I+"-"+e,b+v.stats.money]),M.totalMoney.push(["Date","Cash","Portfolio","Net Worth"]),M.totalMoney.push([I+"-"+e,v.stats.money,b,b+v.stats.money]);for(var o=0;o<t.length;o++)M.resourceList[t[o].name]=[["Date","Cost"],[I+"-"+e,t[o].cost]]},document.body.appendChild(e)},d={},h="1.0.7",f=document.getElementsByClassName("log-list")[0],p=10,g=[],y=0;y<e(15,20);y++)g.push({name:o(),location:n(),temp:a()});for(var v={stats:{money:e(350,500),location:e(0,g.length-1),resources:function(){var t=e(12,20),o=i(t);return c(o,t),o.sort(function(e,t){return t.amount-e.amount})}()}},b=0,x=0;x<v.stats.resources.length;x++)b+=v.stats.resources[x].amount*v.stats.resources[x].cost;var w=new Date,C=w.getMonth()+1,I=w.getFullYear(),M=[],E=function(e,t,o){var n="";if(void 0!==t&&null!==t){var s="";s=t,n=document.createElement("LI");var a=document.createTextNode(s);n.appendChild(a),void 0!==e||null!==e?(e.appendChild(n),e.scrollTop=e.scrollHeight):console.error("addListElement exception: obj was null. Please call addListELement with a non-null, defined object as the first argument. See syntax: addListElement(obj, text, cssClass), with cssClass being optional.")}if(void 0!==o&&null!==o)if(o.split(" ").length>1){var r=o.split(" ");for(var l in r)r.hasOwnProperty(l)&&n.classList.add(r[l])}else n.classList.add(o)},L=function(e,t){var o=document.getElementsByClassName(e)[0];void 0!==o?o.innerText=t:console.error("changeListElement needs to be called with a valid cssClass and incoming text. Check your syntax: changeListElement(cssClass, text);")},N=function(t){var o=v.stats.resources[t],n=Math.floor(.2*Math.abs(o.variant)),s=n>1?n:e(5,15),a=l();v.stats.resources[t]={cost:e(e(2,5),e(20,e(20,110))),name:r(),type:a,trend:u(a),amount:0},v.stats.money+=s,E(f,"Player paid out $"+s+" during the liquidation!");var i=C>9?""+C:"0"+C;M.resourceList[v.stats.resources[t].name]=[["Date","Cost"],[I+"-"+i,o.cost]]},B=function(t,o,n,s,a,r){e(100)<=r&&(t[a].cost<o&&t[a].cost>Math.abs(n)&&(v.stats.resources[a].cost+=n,n>0?E(f,s+" has risen $"+n+" dollars.","resource-increase"):0>n&&E(f,s+" has fallen $"+Math.abs(n)+" dollars.","resource-decrease")),t[a].cost<=1&&(E(f,s+" is bankrupt! Resource pulled from market."),N(a),E(f,"New resource ("+t[a].name+", worth $"+t[a].cost+") created!")))},T=function(){for(var t=v.stats.resources,o="",n="",s=0,a=250,r=0;r<t.length;r++)s=e(0,t[r].trend.maxFlux),o=t[r].name,n=t[r].trend.name,"stable-up"===n||"stable"===n||"stable-down"===n?B(t,a,s,o,r,10):B(t,a,s,o,r,30)},j=function(){var e=v.stats;e.resources.sort(function(e,t){return t.amount-e.amount});for(var t="",o="",n=0;n<e.resources.length;n++)t=document.getElementsByClassName("resource-"+n)[0],o='<p><span class="fa '+e.resources[n].type.icon+' fa-fw"></span>'+e.resources[n].name+'</p><p><span class="fa fa-dollar fa-fw"></span>'+e.resources[n].cost+"</p>",e.resources[n].amount>0&&(o+='<p><span class="fa fa-shopping-cart fa-fw"></span>'+e.resources[n].amount+"</p>"),t.innerHTML=o,e.resources[n].amount>0&&!t.classList.contains("owned")?t.classList.add("owned"):0===e.resources[n].amount&&t.classList.contains("owned")&&t.classList.remove("owned")},S=function(){var e=v.stats,t=v.stats.resources,o=C>9?""+C:"0"+C;M.netWorth.push([I+"-"+o,b+e.money]),M.totalMoney.push([I+"-"+o,e.money,b,b+e.money]);for(var n in t)t.hasOwnProperty(n)&&M.resourceList[t[n].name].push([I+"-"+o,t[n].cost])},W=function(){C>=12?(C=1,I+=1):C+=1,S()},k=function(){var e=v.stats;T(),b=0;for(var t=0;t<e.resources.length;t++)b+=e.resources[t].amount*e.resources[t].cost;var o=document.getElementsByClassName("net-worth-button")[0],n=o.textContent;n=n.split("$"),parseInt(n[1])<b+parseInt(e.money)?L("net-worth-button","$"+e.money+"/Net Worth: $"+(b+parseInt(e.money))+" --- Up!"):parseInt(n[1])===b+parseInt(e.money)?L("net-worth-button","$"+e.money+"/Net Worth: $"+(b+parseInt(e.money))):L("net-worth-button","$"+e.money+"/Net Worth: $"+(b+parseInt(e.money))+" --- Down!"),L("location","Location: "+g[parseInt(e.location)].name),j(),W()},A=function(){for(var e=[],t=0;t<v.stats.resources.length;t++)v.stats.resources[t].amount>0&&e.push(t);return 0!==e.length?!0:!1},D=function(){var t=[];if(v.stats.resources.length>1)for(var o=0;o<v.stats.resources.length;o++)v.stats.resources[o].amount>0&&t.push(o);v.stats.resourceIndex=0===t.length?0:t[e(0,t.length)]},F=function(t){var o=v.stats;"undefined"!=typeof t&&"object"!=typeof t?t<o.resources.length?v.stats.resourceIndex=t:console.error("updateResourceIndex exception: Incoming resourceIndex outside of bounds of resources array."):v.stats.resourceIndex=e(0,o.resources.length)},O=function(e){v.stats.location=e},Y=function(e,t,o){var n="";void 0!==e&&null!==e?e.addEventListener("click",function(){"object"==typeof t&&void 0!==t&&null!==t?t.length>1?2===t.length?n=t[0](t[1]):3===t.length&&(n=t[0](t[1],t[2])):n=t():"function"==typeof t?n=t():(console.error("addButtonEvent called with undefined logMessage function. logMessage function should return a string. See syntax: addButtonEvent(button, logFunction, moreBehavior), with moreBehavior being an optional function."),console.error("typeof logMessage = "+typeof t)),void 0!==n&&E(f,n),void 0!==o&&null!==o&&("function"==typeof o?o():"object"==typeof o&&o[0](o[1]))}):console.error("addButtonEvent needs a defined, non-null button as it's first argument. See syntax: addButtonEvent(button, logFunction, moreBehavior), with moreBehavior being an optional function.")},q=function(e,t){"undefined"==typeof e||null===e?(F(),e=v.stats.resourceIndex):F(e);var o=void 0===t?1:t;v.stats.money<v.stats.resources[e].cost*o?(E(f,"Can't afford unit(s) of "+v.stats.resources[e].name+"."),E(f,"(Attempted to purchase "+o+".)")):E(f,"You bought "+o+" unit(s) of "+v.stats.resources[e].name+".")},P=function(e){var t=v.stats,o=void 0===e?1:e,n=t.resourceIndex;t.money>=t.resources[n].cost*o?(v.stats.money=t.money-t.resources[n].cost*o,v.stats.resources[n].amount+=parseInt(o)):console.error("buyAction exception: Not enough money to make purchase."),k()},H=function(e,t){if("undefined"==typeof e||null===e){if(!A())return E("You don't have any resource to sell! Try buying some."),null;D(),e=v.stats.resourceIndex}else F(e);var o=void 0===t?1:t;v.stats.resources[e].amount>=o?E(f,"You sold "+o+" unit(s) of "+v.stats.resources[e].name+"."):E(f,"You don't have "+o+" unit(s) of "+v.stats.resources[e].name+".")},R=function(e){if(A()){var t=v.stats,o=void 0===e?1:e,n=t.resourceIndex;t.resources[n].amount>=o&&(v.stats.resources[n].amount-=parseInt(o),v.stats.money=t.money+t.resources[n].cost*o,k())}},z=function(t){for(var o=v.stats,n=e(0,g.length-1);n===parseInt(o.location);)n=e(0,g.length-1);var a=t||n,r=Math.ceil(s(g[a],g[o.location]));return p=Math.floor(r*(.001*e(1,3))),o.money<p?(E(f,"Can't afford the "+r+" light-year move from "+g[o.location].name+" to "+g[a].name+"."),E(f,"Why don't you sell some resources?"),null):(F(),E(f,"Player moved from "+g[parseInt(o.location)].name+" to "+g[a].name),O(a),void E(f,"You were charged  $"+p+" to go "+r+" light-years."))},G=function(){var e=v.stats;e.money>=p&&(v.stats.money=parseInt(e.money)-p,k())},K=function(){$(".travel-text").text("Where would you like to go? Currently on "+g[parseInt(v.stats.location)].name+".");for(var e=$(".travel-select")[0],t=e.options.length-1;t>=0;t--)e.remove(t);for(var o=0;o<g.length;o++)if(parseInt(v.stats.location)!==o){var n=document.createElement("option");n.value=n.innerHTML=g[o].name+", "+Math.ceil(s(g[o],g[v.stats.location]))+" LY",e.appendChild(n)}$(".travel").dialog({modal:!0,buttons:{Go:function(){var e=0;for(var t in g)g.hasOwnProperty(t)&&$(".travel-select")[0].value.indexOf(g[t].name)>-1&&(e=t);z(e),G(),$(this).dialog("close")},"Random Planet":function(){z(),G(),$(this).dialog("close")},Close:function(){$(this).dialog("close")}}})},U=function(){$(".options-text").text("Microstocks"),$(".options-subtext").text(h),$(".options-author").html('Author: <a href="https://github.com/evangipson">Evan Gipson</a>'),$(".options").dialog({modal:!0,buttons:{Close:function(){$(this).dialog("close")}}})},V=function(e,t){$(".graph-type").text(e);var o={title:"resourceList"===e?t:e,hAxis:{title:"Date",titleTextStyle:{color:"#333"},slantedText:!0,slantedTextAngle:50},vAxis:{minValue:0},width:$("#graph-wrapper").outerWidth(),height:$("#graph-wrapper").outerHeight(),pointSize:3,isStacked:!1},n=new google.visualization.AreaChart(document.getElementById("graph-wrapper"));"resourceList"===e?n.draw(google.visualization.arrayToDataTable(M[e][t]),o):n.draw(google.visualization.arrayToDataTable(M[e]),o),$(".graph-dialog").dialog({modal:!0,buttons:{Close:function(){$(this).dialog("close")}}})},J=function(e,t){var o=v.stats,n=e,s=o.resources[n].name,a=o.resources[n].cost,r=o.resources[n].type.name,l=o.resources[n].type.icon,u=o.resources[n].trend.maxFlux,i=o.resources[n].amount,c=u>=0?"<li>Avg. Trend amount: $"+u+"</li>":"<li>Avg. Trend amount: -$"+Math.abs(u)+"</li>",m=i>0?"<li>You own "+i+" unit(s) of "+s+"</li>":"<li>You don't own any units of "+s+"</li>";return'<h3><span class="fa '+l+' fa-fw"></span>'+s+'</h3><hr /><ul><li class="buysell-resource-value">Current cost: $'+a+"</li><li>Type: "+r+"</li>"+c+m+"</ul><hr />"+t},Q=function(e){var t=v.stats,o=0,n=0,s=0,a=1,r=t.resources[e].name;$(".buy-sell-dialogue").html(J(e,"Would you like to buy or sell "+r+" today?")),$(".buy-sell").dialog({modal:!0,buttons:{Buy:function(){o=parseInt(t.money)/parseInt(t.resources[e].cost),1>o?$(".buy-sell-dialogue").html(J(e,"Can't afford any "+r+"! Try selling other resources!")):(n=o>=50?5:1,$(".buy-resource-slider").slider({value:1,min:1,max:o,step:n,slide:function(e,t){$(".buy-resource-amount").text("Buying "+t.value+" "+r+"!"),a=t.value}}),s=$(".resource-slider").slider("value"),$(".buy-resource-amount").text("Buying 1 "+r+"!"),$(".buy-dialog").dialog("open"))},Sell:function(){t.resources[e].amount>0?(n=t.resources[e].amount>=50?5:1,$(".sell-resource-slider").slider({value:1,min:1,max:t.resources[e].amount,step:n,slide:function(e,t){$(".sell-resource-amount").text("Selling "+t.value+" "+r+"."),a=t.value}}),s=$(".resource-slider").slider("value"),$(".sell-resource-amount").text("Selling 1 "+r+"."),$(".sell-dialog").dialog("open")):$(".buy-sell-dialogue").html(J(e,"You don't have any "+r+" to sell!"))},History:function(){V("resourceList",r)},Cancel:function(){$(this).dialog("close")}}}),$(".buy-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Buy:function(){if(null!==a&&void 0!==a){var t=q(e,a);E(f,t),P(a)}else console.error("buySellDialogue exception: Resource purchase amount undefined or null, please try again!");$(".buy-sell").dialog("close"),$(this).dialog("close")},"Buy Max":function(){var o=Math.floor(t.money/t.resources[e].cost),n=q(e,o);E(f,n),P(o),$(".buy-sell").dialog("close"),$(this).dialog("close")},Cancel:function(){$(".buy-sell").dialog("close"),$(this).dialog("close")}}}),$(".sell-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Sell:function(){if(null!==a&&void 0!==a){var t=H(e,a);E(f,t),R(a)}else console.error("buySellDialogue exception: Resource sell amount undefined or null, please try again!");$(".buy-sell").dialog("close"),$(this).dialog("close")},"Sell All":function(){var o=t.resources[e].amount,n=H(e,o);E(f,n),R(o),$(".buy-sell").dialog("close"),$(this).dialog("close")},Cancel:function(){$(".buy-sell").dialog("close"),$(this).dialog("close")}}})},X=function(){for(var e=document.getElementsByClassName("resource"),t=0;t<e.length;t++)Y(e[t],[Q,t])},Z=function(){for(var e=v.stats,t="",o="",n=[],s=document.getElementsByClassName("resource-list")[0],a="",r=0;r<e.resources.length;r++){a=document.createElement("LI"),o='<p><span class="fa '+e.resources[r].type.icon+' fa-fw"></span>'+e.resources[r].name+'</p><p><span class="fa fa-dollar fa-fw"></span>'+e.resources[r].cost+"</p>",e.resources[r].amount>0&&(o+='<p><span class="fa fa-shopping-cart fa-fw"></span>'+e.resources[r].amount+"</p>"),a.innerHTML=o,t="resource resource-"+r+" under-hover",e.resources[r].amount>0&&(t+=" owned"),n=t.split(" ");for(var l in n)n.hasOwnProperty(l)&&a.classList.add(n[l]);s.appendChild(a)}X()},_=function(){for(var e=v.stats,t=v.stats.resources,o=document.getElementsByClassName("inventory-list")[0],n=0,s=0;s<t.length;s++)n+=e.resources[s].amount*e.resources[s].cost;E(o,"$"+e.money+"/Net Worth: $"+(n+parseInt(e.money)),"money net-worth-button under-hover"),E(o,"Location: "+g[parseInt(e.location)].name,"location under-hover"),Z()};return d.init=function(){$.getScript("https://code.jquery.com/ui/1.11.4/jquery-ui.min.js",function(){var e=document.getElementsByClassName("buy-button")[0],t=document.getElementsByClassName("sell-button")[0],o=document.getElementsByClassName("travel-button")[0],n=document.getElementsByClassName("options-button")[0];Y(e,q,P),Y(t,H,R),Y(o,K),Y(n,U),_(),E(f,"You arrive on "+g[parseInt(v.stats.location)].name+" with a few resources and $"+v.stats.money+" to your name."),m();var s=document.getElementsByClassName("net-worth-button")[0];Y(s,[V,"totalMoney"])})},d}(),scriptTag=document.createElement("script");scriptTag.src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js",scriptTag.onload=scriptTag.onreadystatechange=MICROSTOCKS.init,document.body.appendChild(scriptTag);